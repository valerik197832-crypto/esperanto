<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Dictionary Helper</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        textarea { width: 100%; height: 150px; padding: 10px; font-size: 16px; margin-bottom: 10px; }
        button { padding: 10px 20px; font-size: 16px; background: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background: #0056b3; }
        .result { margin-top: 20px; padding: 15px; background: #f8f9fa; border: 1px solid #ddd; }
        .missing { color: #d9534f; font-weight: bold; }
        .ok { color: #28a745; }
        .code-block { background: #222; color: #fff; padding: 15px; font-family: monospace; white-space: pre-wrap; margin-top: 10px; }
    </style>
</head>
<body>

    <h1>üë®‚Äçüíª –ü–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –°–ª–æ–≤–∞—Ä—è</h1>
    <p>–í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞ –≠—Å–ø–µ—Ä–∞–Ω—Ç–æ:</p>
    <textarea id="inputText" placeholder="–í—Å—Ç–∞–≤—å —Ç–µ–∫—Å—Ç —Å—é–¥–∞..."></textarea>
    <br>
    <button onclick="checkWords()">üîç –ù–∞–π—Ç–∏ –Ω–æ–≤—ã–µ —Å–ª–æ–≤–∞</button>

    <div id="output"></div>

    <!-- –ü–û–î–ö–õ–Æ–ß–ê–ï–ú –¢–í–û–Æ –ë–ê–ó–£ -->
    <script src="languages/base.js"></script>

    <script>
        function checkWords() {
            // 1. –ë–µ—Ä–µ–º —Ç–µ–∫—Å—Ç
            let text = document.getElementById('inputText').value;
            
            // 2. –ß–∏—Å—Ç–∏–º —Ç–µ–∫—Å—Ç (—É–±–∏—Ä–∞–µ–º —Ç–æ—á–∫–∏, –∑–∞–ø—è—Ç—ã–µ, –¥–µ–ª–∞–µ–º –º–∞–ª–µ–Ω—å–∫–∏–º–∏ –±—É–∫–≤–∞–º–∏)
            // –†–µ–≥—É–ª—è—Ä–∫–∞ –ª–æ–≤–∏—Ç –±—É–∫–≤—ã —ç—Å–ø–µ—Ä–∞–Ω—Ç–æ: a-z –∏ ƒâƒùƒ•ƒµ≈ù≈≠
            let cleanText = text.toLowerCase().replace(/[.,!?;:¬´¬ª"()]/g, '');
            let words = cleanText.split(/\s+/); // –†–∞–∑–±–∏–≤–∞–µ–º –ø–æ –ø—Ä–æ–±–µ–ª–∞–º

            // 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ
            let missingWords = [];
            let existingCount = 0;
            let uniqueWords = [...new Set(words)]; // –£–±–∏—Ä–∞–µ–º –ø–æ–≤—Ç–æ—Ä—ã –≤–Ω—É—Ç—Ä–∏ —Ç–µ–∫—Å—Ç–∞

            uniqueWords.forEach(word => {
                if (!word) return;
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å–ª–æ–≤–æ –≤ LEGO_BASE
                if (LEGO_BASE[word]) {
                    existingCount++;
                } else {
                    missingWords.push(word);
                }
            });

            // 4. –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            let html = `<div class="result">`;
            html += `<p class="ok">‚úÖ –£–∂–µ –µ—Å—Ç—å –≤ –±–∞–∑–µ: <b>${existingCount}</b> —Å–ª–æ–≤.</p>`;
            
            if (missingWords.length === 0) {
                html += `<h3>üéâ –í—Å—ë –≥–æ—Ç–æ–≤–æ! –ù–æ–≤—ã—Ö —Å–ª–æ–≤ –Ω–µ—Ç.</h3>`;
            } else {
                html += `<p class="missing">üö® –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å: <b>${missingWords.length}</b> —Å–ª–æ–≤.</p>`;
                html += `<p>–í–æ—Ç –∑–∞–≥–æ—Ç–æ–≤–∫–∏ –¥–ª—è <b>base.js</b> (—Å–∫–æ–ø–∏—Ä—É–π –∏ –∑–∞–ø–æ–ª–Ω–∏):</p>`;
                
                let code = '';
                missingWords.forEach(w => {
                    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–∞
                    // –ü—ã—Ç–∞–µ–º—Å—è —É–≥–∞–¥–∞—Ç—å –∫–æ—Ä–µ–Ω—å (–ø—Ä–æ—Å—Ç–æ –±–µ—Ä–µ–º —Å–ª–æ–≤–æ —Å –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã) - —ç—Ç–æ —á–µ—Ä–Ω–æ–≤–∏–∫
                    let CapWord = w.charAt(0).toUpperCase() + w.slice(1);
                    code += `'${w}': { word: '${CapWord}', parts: ['${CapWord}'] },\n`;
                });
                
                html += `<div class="code-block">${code}</div>`;
                
                html += `<p>–ó–∞–≥–æ—Ç–æ–≤–∫–∏ –¥–ª—è <b>ru.js</b> / <b>en.js</b>:</p>`;
                let codeTrans = '';
                missingWords.forEach(w => {
                    codeTrans += `'${w}': { text: '', roots: [] },\n`;
                });
                html += `<div class="code-block">${codeTrans}</div>`;
            }
            html += `</div>`;

            document.getElementById('output').innerHTML = html;
        }
    </script>
</body>
</html>